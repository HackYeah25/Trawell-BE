# User Profiling System - Questions and Validation Rules

system_prompt: |
  You are a friendly AI travel assistant conducting an interactive profiling session.
  Your goal is to understand the user's travel preferences through natural conversation.

  IMPORTANT RULES:
  1. Ask questions naturally and conversationally
  2. Accept answers that provide reasonable insight - don't be overly strict
  3. Only ask follow-up questions if the answer is truly unclear or missing key information
  4. Trust the user's responses - if they give you something, work with it
  5. Move forward confidently when you have enough to make recommendations
  6. Keep the conversation flowing and friendly
  7. Prioritize user experience over perfect data

intro_message: |
  Welcome! 👋 I'm excited to help you discover amazing travel destinations.

  To give you the best personalized recommendations, I'd love to get to know your travel style.
  This will be a quick conversation - just 4 simple questions!

  Ready to start?

questions:
  - id: "traveler_style"
    order: 1
    category: "core_preferences"
    question: |
      Let's start with the basics - how would you describe your ideal travel pace and energy?

      🏃 High-energy explorer (multiple activities daily, always on the move, hiking and adventures)
      🚶 Moderate explorer (balanced mix of activities and downtime, some walking tours)
      🧘 Relaxed explorer (leisurely exploration, shorter excursions, plenty of rest)
      🛋️ Pure relaxation (minimal activities, focused on unwinding and taking it easy)

    context: |
      Understanding the user's travel pace and energy level helps us recommend appropriate 
      destinations, activities, and daily schedules that match their style.

    validation:
      accept_if:
        - "Any indication of energy level or pace preference"
        - "Choosing one of the provided options"
        - "Describing their typical travel day in any reasonable detail"

      only_follow_up_if:
        - "Response is a single word with no context (e.g., just 'yes' or 'maybe')"
        - "Response is completely off-topic"

      examples_if_truly_unclear:
        - "For example, would you rather pack your days with activities or have plenty of downtime?"

    extracts_to:
      field: "preferences.traveler_style"
      type: "object"
      sub_fields:
        - "energy_level: enum(high, moderate, low)"
        - "pace: enum(fast, balanced, leisurely)"

  - id: "environment"
    order: 2
    category: "core_preferences"
    question: |
      What environments call to you the most?

      🏙️ Cities • 🌲 Nature • 🏖️ Beaches • ⛰️ Mountains • 🌍 Mixed

    context: |
      Environment preference is crucial for destination matching.

    validation:
      accept_if:
        - "Mentions at least one environment type"
        - "Any clear preference indication"

      only_follow_up_if:
        - "Response doesn't mention any environment at all"

    extracts_to:
      field: "preferences.environment"
      type: "enum"
      values: ["city", "nature", "beach", "mountains", "mixed"]

  - id: "past_destinations"
    order: 3
    category: "experience"
    question: |
      Tell me about some of your favorite past trips - where you went and what made them special?

      (If you haven't traveled much, just let me know!)

    context: |
      Past destinations reveal patterns and help avoid repetition or find similar experiences.

    validation:
      accept_if:
        - "Mentions any destination (even just one)"
        - "Indicates they haven't traveled much"
        - "Any response that gives insight into travel history"

      only_follow_up_if:
        - "Response is unclear about whether they've traveled or not"

    extracts_to:
      field: "past_destinations"
      type: "array"
      context_field: "past_trip_insights"

  - id: "anything_else"
    order: 4
    category: "constraints"
    question: |
      Last one! Anything else I should know? (dietary needs, accessibility, language preferences, etc.)

      Or we can skip this if nothing comes to mind!

    context: |
      This open-ended question captures important constraints and preferences that might 
      not fit into structured categories, allowing users to share what matters most to them.

    validation:
      accept_if:
        - "Any response, including 'no', 'nothing', 'nope', etc."
        - "This question should NEVER require follow-up"

    extracts_to:
      field: "additional_constraints"
      type: "object"
      sub_fields:
        - "dietary_restrictions: array"
        - "mobility_limitations: array"
        - "language_preferences: array"
        - "other_notes: string"

completion_message: |
  Perfect! 🎉 I've got what I need to help you find amazing destinations.

  Let's start exploring options for your next adventure!

validation_rules:
  philosophy: "Accept reasonable responses and move forward. User experience > perfect data."
  
  min_profile_completeness: 0.5  # Only 50% completeness required - very permissive

  critical_questions:  # Only these 2 MUST have some answer
    - "traveler_style"
    - "environment"

  max_follow_up_attempts: 1  # Only ask for clarification ONCE, then move on

  default_behavior: "When in doubt, accept the answer and proceed"

  insufficient_answer_prompts:
    - "Just to make sure I understand - could you give me a quick example?"

suggestion_prompts:
  encouragement: |
    Great! That helps a lot.

  moving_forward: |
    Perfect, moving on!
